import{g as T,v as B,j as N,x as w,r as P,o as t,f as n,l as s,F as p,y,z as L,t as u,k,m as A,n as M,A as C}from"./vendor.28259ad5.js";import{_ as U}from"./index.7296781b.js";function F(){let h=T(!1),o=B({}),c=B({});const r=a=>{h=a},f=(a,_)=>{console.log("openMenu"),o=a,c=_;let b=a.getAttribute("aria-controls");a.setAttribute("aria-expanded","true"),document.getElementById(b).setAttribute("aria-hidden","false"),r(!0)},v=(a,_=!1)=>{console.log("closeMenu");let b=a.getAttribute("aria-controls");a.setAttribute("aria-expanded","false"),document.getElementById(b).setAttribute("aria-hidden","true"),r(!1)},i=a=>{a.addEventListener("focus",l)},e=a=>{a.removeEventListener("focus",l)},l=a=>{a.currentTarget},g=a=>{if(h&&o)try{let _=o.contains(a.target),b=c.contains(a.target);!_&&!b&&(d("closeAllMenus"),r(!1))}catch{}},S=a=>{h&&a.keyCode==27&&(d("closeAllMenus"),r(!1))},d=(a,_=null)=>{let b=document.getElementsByClassName("fsa-nav-global__link--has-sub-menu");for(let E=0;E<b.length;E++){let x=b[E];x.cb=d,m(a,x)}},m=(a,_)=>{a=="addFocusListeners"?i(_):a=="removeFocusListeners"?e(_):a=="closeAllMenus"&&v(_,!0)};return{isMenuOpen:h,theItem:o,theMenu:c,openMenu:f,closeMenu:v,loopItems:d,listenForKeys:S,documentClickHandler:g}}const H={props:{NAV_DATA:Object,EXTRA_CLASSES:String,USE_SEARCH:String,USE_SCOPED_SEARCH:String},setup(h,{emit:o}){const{openMenu:c,closeMenu:r,loopItems:f,listenForKeys:v,documentClickHandler:i}=F();function e(S){let d=S.currentTarget,m=S.currentTarget.nextSibling,a=d.getAttribute("aria-expanded");f("closeAllMenus"),a=="true"?r(d,m):c(d,m)}const l=S=>{let d=document.getElementById("searchPhrase").value;console.log("p",d),o("emitSearch",{type:"default",phrase:d})},g=S=>{let d=document.getElementById("searchPhrase").value,m=document.getElementById("scopedCategory").selected;o("emitSearch",{type:"scoped",scope:m,phrase:d})};return N(()=>{console.log("global-nav onMounted",h.NAV_DATA),window.addEventListener("keydown",v),document.addEventListener("click",i),f("addFocusListeners")}),w(()=>{window.removeEventListener("keydown",v),document.removeEventListener("click",i),f("removeFocusListeners")}),{openMenu:c,closeMenu:r,loopItems:f,listenForKeys:v,toggleMenu:e,doSearch:l,doScopedSearch:g}}},D={class:"fsa-nav-global"},R={class:"fsa-nav-global__bd"},V={class:"fsa-nav-global__list","aria-label":"Primary Navigation",id:"primary-navigation"},I={key:0},O=["id","aria-controls"],j=["id"],X=["id"],z=["aria-labelledby"],K=["id"],G=["aria-labelledby"],q={key:1},J=["id","aria-controls"],Q=["id"],W=["id"],Y={class:"fsa-nav-global__sub-menu-bd"},Z=["aria-labelledby"],$={key:2},ee=["id","aria-controls"],se=["id"],ae=["id"],le={class:"fsa-nav-global__sub-menu-bd"},te=["aria-labelledby"],ne={key:3},oe={class:"fsa-nav-global__text"},re={key:0,class:"fsa-nav-global__aside"},ce={class:"fsa-level"},de={class:"fsa-level fsa-level--inline fsa-level--gutter-xs"},ie=["d"],_e={key:1,class:"fsa-nav-global__search"},ue={class:"fsa-search fsa-search--small",role:"search"},he={class:"fsa-search__bd"},be=s("div",{class:"fsa-search__entry fsa-search__entry--grow"},[s("label",{class:"fsa-search__label fsa-search__label--sr-only",for:"searchPhrase"},"Search [app-name]"),s("input",{placeholder:"Search",class:"fsa-input fsa-input--small fsa-search__input",id:"searchPhrase",type:"search",name:"searchPhrase"})],-1),fe={class:"fsa-search__submit"},ve=s("span",{class:"fsa-search__text"},"Search",-1),ge=[ve],pe={key:2,class:"fsa-nav-global__search"},ye={class:"fsa-search fsa-search--small",role:"search"},Se={class:"fsa-search__bd"},me=s("div",{class:"fsa-search__entry fsa-search__entry--grow"},[s("label",{class:"fsa-search__label fsa-search__label--sr-only",for:"scopedSearchPhrase"},"Search [app-name]"),s("input",{placeholder:"Search",class:"fsa-input fsa-input--small fsa-search__input",id:"scopedSearchPhrase",type:"search",name:"scopedSearchPhrase"})],-1),ke={class:"fsa-search__entry"},Ae=s("label",{class:"fsa-search__label fsa-search__label--sr-only",for:"scopedCategory"},"Search Category",-1),Ce={class:"fsa-select fsa-select--small fsa-search__select",name:"scopedCategory",id:"scopedCategory"},Ee=["value","selected"],Me={class:"fsa-search__submit"},xe=s("span",{class:"fsa-search__text"},"Search",-1),Be=[xe];function Le(h,o,c,r,f,v){const i=P("router-link");return t(),n("nav",null,[s("div",D,[s("div",R,[s("ul",V,[(t(!0),n(p,null,y(c.NAV_DATA.main,e=>(t(),n("li",{key:e.uid,class:L("fsa-nav-global__list-item "+e.columnClass)},[e.hasChild=="true"&&e.columnClass==c.EXTRA_CLASSES&&e.hasHeaders=="true"?(t(),n("div",I,[s("button",{id:e.uid+"-BTN",onClick:o[0]||(o[0]=(...l)=>r.toggleMenu&&r.toggleMenu(...l)),class:"fsa-nav-global__link fsa-nav-global__link--has-sub-menu",type:"button","aria-expanded":"false","aria-controls":e.uid},[s("span",{class:"fsa-nav-global__text",id:e.uid+"-SUB"},u(e.label),9,j)],8,O),s("div",{class:"fsa-nav-global__sub-menu",id:e.uid,"aria-hidden":"true"},[s("div",{class:"fsa-nav-global__sub-menu-bd","aria-labelledby":e.uid+"-SUB"},[(t(!0),n(p,null,y(e.children,l=>(t(),n("div",{key:l.id,class:"fsa-nav-global__sub-menu-group"},[s("h3",{class:"fsa-nav-global__sub-menu-title",id:l.uid},u(l.header),9,K),s("ul",{class:"fsa-nav-global__sub-menu-list","aria-labelledby":l.uid},[(t(!0),n(p,null,y(l.group,g=>(t(),n("li",{key:g.id,class:"fsa-nav-global__sub-menu-item"},[k(i,{to:g.path,class:"fsa-nav-global__sub-menu-link"},{default:A(()=>[M(u(g.label),1)]),_:2},1032,["to"])]))),128))],8,G)]))),128))],8,z)],8,X)])):e.hasChild=="true"&&e.columnClass==c.EXTRA_CLASSES&&e.hasHeaders=="false"?(t(),n("div",q,[s("button",{id:e.uid+"-BTN",onClick:o[1]||(o[1]=(...l)=>r.toggleMenu&&r.toggleMenu(...l)),class:"fsa-nav-global__link fsa-nav-global__link--has-sub-menu",type:"button","aria-expanded":"false","aria-controls":e.uid},[s("span",{class:"fsa-nav-global__text",id:e.uid+"-SUB"},u(e.label),9,Q)],8,J),s("div",{class:"fsa-nav-global__sub-menu",id:e.uid,"aria-hidden":"true"},[s("div",Y,[s("ul",{class:"fsa-nav-global__sub-menu-list","aria-labelledby":e.uid+"-SUB"},[(t(!0),n(p,null,y(e.children,l=>(t(),n("li",{key:l.id,class:"fsa-nav-global__sub-menu-item"},[k(i,{to:l.path,class:"fsa-nav-global__sub-menu-link"},{default:A(()=>[M(u(l.label),1)]),_:2},1032,["to"])]))),128))],8,Z)])],8,W)])):e.hasChild=="true"&&e.multiColumn=="false"?(t(),n("div",$,[s("button",{id:e.uid+"-BTN",onClick:o[2]||(o[2]=(...l)=>r.toggleMenu&&r.toggleMenu(...l)),class:"fsa-nav-global__link fsa-nav-global__link--has-sub-menu",type:"button","aria-expanded":"false","aria-controls":e.uid},[s("span",{class:"fsa-nav-global__text",id:e.uid+"-SUB"},u(e.label),9,se)],8,ee),s("div",{class:"fsa-nav-global__sub-menu",id:e.uid,"aria-hidden":"true"},[s("div",le,[s("ul",{class:"fsa-nav-global__sub-menu-list","aria-labelledby":e.uid+"-SUB"},[(t(!0),n(p,null,y(e.children,l=>(t(),n("li",{key:l.id,class:"fsa-nav-global__sub-menu-item"},[k(i,{to:l.path,class:"fsa-nav-global__sub-menu-link"},{default:A(()=>[M(u(l.label),1)]),_:2},1032,["to"])]))),128))],8,te)])],8,ae)])):(t(),n("div",ne,[k(i,{to:e.path,class:"fsa-nav-global__link"},{default:A(()=>[s("span",oe,u(e.label),1)]),_:2},1032,["to"])]))],2))),128))]),c.NAV_DATA.side?(t(),n("div",re,[s("div",ce,[(t(!0),n(p,null,y(c.NAV_DATA.side,e=>(t(),n("span",{key:e.uid},[k(i,{to:e.path},{default:A(()=>[s("span",de,[e.icon?(t(),n("svg",{key:0,class:L(e.icon.class),"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[s("path",{d:e.icon.path},null,8,ie)],2)):C("",!0),s("span",null,u(e.label),1)])]),_:2},1032,["to"])]))),128))])])):C("",!0),c.USE_SEARCH=="true"?(t(),n("div",_e,[s("div",ue,[s("div",he,[be,s("div",fe,[s("button",{onClick:o[3]||(o[3]=(...e)=>r.doSearch&&r.doSearch(...e)),class:"fsa-btn fsa-btn--small fsa-search__btn fsa-search__btn--icon"},ge)])])])])):C("",!0),c.USE_SCOPED_SEARCH=="true"?(t(),n("div",pe,[s("div",ye,[s("div",Se,[me,s("div",ke,[Ae,s("select",Ce,[(t(!0),n(p,null,y(h.SCOPED_SEARCH_CATEGORIES,e=>(t(),n("option",{key:e.label,value:e.val,selected:e.selected},u(e.label),9,Ee))),128))])]),s("div",Me,[s("button",{onClick:o[4]||(o[4]=(...e)=>r.doScopedSearch&&r.doScopedSearch(...e)),class:"fsa-btn fsa-btn--small fsa-search__btn fsa-search__btn--icon"},Be)])])])])):C("",!0)])])])}var we=U(H,[["render",Le]]);export{we as g};
